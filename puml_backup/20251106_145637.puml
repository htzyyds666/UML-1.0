@startuml
title 类图

class 用户 {
  +用户名: string
  +学号/工号: int
  --
  +登录(): void
  +退出(): void
}

class 学生 {
  +运动数据: string
  +健康报告: string
  --
  +查看健康报告(): void
  +分享运动成果(): void
  +同步运动数据(): void
  +每日运动打卡(): void
}

class 管理员 {
  +权限: string
  --
  +设置运动规则(): void
  +审核异常打卡(): void
}

class 定时器 {
  +跑步任务提醒(): void
}

class GPS定位系统 {
  +启动GPS定位(): void
  +记录运动轨迹(): void
}

class 运动记录 {
  +运动时间: time
  +打卡次数: int
  --
  +更新数据(): void
}

// 修改：将“异常打卡”设计为“运动记录”的子类，表达异常打卡是运动记录的一种特殊情况
class 异常打卡 {
  +异常原因: string
  +打卡时间: time
  --
  +标记异常(): void
  +处理异常(): void
}

学生 --|> 用户 : 继承
管理员 --|> 用户 : 继承
学生 ..> 定时器

// 修改：将“学生”和“GPS定位系统”之间的组合关系改为聚合关系，表示GPS定位系统是独立存在的辅助工具
学生 o-- GPS定位系统 : 聚合 [1]

// 原聚合关系保留
学生 --> 运动记录 : 聚合 [1..n]
管理员 --> 运动记录 : 聚合 [1..n]

// 修改：将“异常打卡”改为继承“运动记录”，删除原关联
// 修改：保留注释说明该关系表达异常打卡是运动记录的子类
// <无额外关联线需添加>

GPS定位系统 ..> 异常打卡 : 依赖
note right of GPS定位系统 
  依赖关系表示 GPS定位系统检测产生异常打卡事件，
  方向为GPS定位系统被异常打卡依赖，
  业务上可视为数据流或事件触发的简化表示
end note

note top 
  图中的中文标注了关系类型
  定时器对跑步任务提醒使用依赖关系
  学生聚合GPS定位系统（1对1聚合）
  学生和管理员分别与运动记录以聚合关系关联，且多重性为1到多
  异常打卡是运动记录的子类，表示异常打卡作为运动记录的特殊表现
end note

@enduml